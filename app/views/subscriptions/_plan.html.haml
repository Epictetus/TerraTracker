.subscription
  .header
    %h2.title= plan.title.upcase
    %p.description= plan.description
  .price
    %span.currency Â£
    %span.value= plan.value
    %span.duration= plan.duration
  .details
    %p= "#{plan.project_count} Projects"
    %p= "#{plan.user_count} Users"
    %p Technical Support
  - if current_plan(plan) && !@subscription.nil? && !@user_disabled && !@project_disabled
    = link_to "Cancel Subscription", cancel_subscriptions_path, :class => 'btn btn-danger'
  - elsif !current_plan(plan) && plan.project_count >= @current_company.projects.count && plan.user_count >= @current_company.users.count 
    %a.btn.btn-success{ :id => plan.id, :href => plan.generate_new_url, :target => "_blank" } Choose this plan
  - elsif !current_plan(plan)
    %a.btn.btn-success{ :id => plan.id, :href => plan.generate_new_url, :target => "_blank", :disabled => 'true'} Choose this plan
    :javascript
      $('##{plan.id}').popover({placement: 'top', title: 'Action Needed', content: 'To be able to switch to this plan, you need to make sure you have a limit of #{plan.project_count} project(s) and #{plan.user_count} user(s).'})
  - else
    %a.btn.btn-success{ :id => plan.id, :href => "#", :disabled => 'true' } Current Plan
    :javascript
      $('##{plan.id}').popover({placement: 'top', title: 'Action Needed', content: 'To be able to cancel this plan, you need to make sure you have a limit of #{@plans.first.project_count} project(s) and #{@plans.first.user_count} user(s).'})

